<div data-ng-if="!hakuState">

    <div class="row mx form-group border-bottom-1">
        <div class="col-md-4">
            <h3 class="text-secondary text-primary" style="margin-top: 10px;">Lataa tiedot</h3>
        </div>
        <div class="col-md-8 ">
            <button class="pull-right btn btn-primary">
                <a data-ng-href="{{csvurl}}" class="text-white no-hover" download="persons.csv">Lataa CSV</a>
            </button>
        </div>
    </div>

    <div class="row mx form-group pt">
        <div class="col-md-4">
            <h3 class="text-secondary text-primary" style="margin-top: 6px;">Tuo päivitetyt tiedot</h3>
        </div>
        <div class="col-md-8">
            <div ng-show="!csvFile.file">
                <div class="d-inline-block pull-right">
                    <label for="file-upload" class="custom-file-upload btn btn-primary cursor-pointer">
                        Valitse tiedosto
                    </label>
                    <input id="file-upload" type="file" ngf-select="uploadCsv(csvFile.file)" ng-model="csvFile.file" name="filename"
                           ngf-max-size="100MB"  data-file-reader-directive file-content="csvData" accept=".csv">
                </div>
            </div>
            <div ng-show="csvFile.file" class="text-right">
                <span class="font-weight-bold text-xl" style="margin-right: 10px;">{{csvFile.file.name}}</span>
            </div>
        </div>
    </div>

    <div data-ng-if="csvData.data.length > 0">
        <div class="row">
            <div class="col-xs-12 text-secondary">
                <h4 class="font-weight-700">Esikatselu lisättävistä henkiöistä (10 ensimmäistä):</h4>
            </div>
        </div>
        <div class="row no-gutter">
            <div class="col-md-12">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Tunniste / ID</th>
                            <th>Etunimi</th>
                            <th>Sukunimi</th>
                            <th>Email</th>
                            <th>ORCID</th>
                            <th>Alayksikkö 1</th>
                            <th>Alayksikkö 2</th>
                            <th>Alayksikkö 3</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="row in csvData.data | limitTo: 10">
                            <td>{{row.hrnumero}}</td>
                            <td>{{row.etunimi}}</td>
                            <td>{{row.sukunimi}}</td>
                            <td>{{row.email}}</td>
                            <td>{{row.orcid}}</td>
                            <td>{{row.alayksikko1}}</td>
                            <td>{{row.alayksikko2}}</td>
                            <td>{{row.alayksikko3}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="row" data-ng-if="personsToBeDeleted.length > 0">
        <div class="col-md-12">
            <div>
                <h4 class="font-weight-700 text-danger mt-0 text-secondary">Huom! Seuraavat henkilöt poistetaan
                    tietokannasta:</h4>
            </div>
            <div class="alert alert-danger text-secondary m-b">
                <ul>
                    <li data-ng-repeat="person in personsToBeDeleted" class="">
                        <span class="font-weight-bold">{{person.hrnumero}}</span>
                        <span class="pxs">{{person.etunimi}} {{person.sukunimi}}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div data-ng-if="csvFile.file">
    <div class="row mb-x">
            <div class="col-xs-12">
               <p class="font-weight-500"> Hyväksy yllä olevat muutokset painamalla Tallenna tai hylkää muutokset Peruuta nappulasta</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <button class="btn btn-lg btn-primary btn-block"
                        type="button"
                        data-ng-click="saveCsvData()">
                    Tallenna
                </button>
            </div>
            <div class="col-md-4 pull-right">
                <button class="btn btn-lg btn-danger btn-block"
                        type="button"
                        data-ng-click="discardChanges(csvData)">
                    Peruuta
                </button>
            </div>
        </div>
    </div>

</div>

<div data-ng-show="showAlertDialog">
    <span data-ng-class="{'text-danger': csvUploadError}">{{csvUploadErrorText}}</span>
    <div class="alert alert-success alert-dismissible" data-ng-class="{'alert-danger': csvUploadError}" role="alert">
        <strong>{{csvUploadResponseText}}</strong>
        <button type="button" data-ng-click="resetDialog()" class="btn close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div>