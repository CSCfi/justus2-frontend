<div class="alert alert-transparent text-center" data-ng-if="justus.julkaisu.id">
  <h4>Muokkaat julkaisua {{ justus.julkaisu.id }}, {{ justus.julkaisu.julkaisunnimi }}</h4>
  <button class="btn btn-primary" data-ng-click="clearFormAndReturnToStart()">
    Hylkää muutokset ja siirry alkuun
  </button>
</div>


<div role="form" data-ng-if="!loading.publication" class="form-container">
  <h3 class="form-header">{{i18n.content.tietojensyotto.yleiset[lang]}}</h3>

  <!-- alun yhteiset -->
  <div class="px">
  <!-- Kenttä: Julkaisutyyppi -->
  <div class="row form-group" id="julkaisutyyppiGroup">
    <div class="col-sm-4 col-xs-12">
      <label class="control-label" data-ng-bind="i18n.content.form.julkaisutyyppi[lang]"></label>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_julkaisutyyppi">
      <div class="row">
        <div class="col-xs-12">
          <p class="font-weight-500">{{ getSelite(codes.julkaisutyypit, justus.julkaisu.julkaisutyyppi) }}</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Kenttä: Julkaisuvuosi -->
  <div class="row form-group" id="julkaisuvuosiGroup" data-ng-if="isFieldVisible('julkaisuvuosi')">
    <div class="col-sm-4 col-xs-12">
      <label for="julkaisuvuosi" class="control-label" data-ng-bind="i18n.content.form.julkaisuvuosi[lang]"></label>
      <i class="fa fa-info-circle justus-info justus-color cursor-pointer"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{ julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisuvuosi.tooltipF[lang] : i18n.content.form.julkaisuvuosi.tooltip[lang] }}">
      </i>
      <i data-ng-if="isFieldRequired('julkaisuvuosi')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_julkaisuvuosi">
      <div class="row">
        <div class="col-sm-5 col-xs-12">
          <input type="text" class="form-control"
            name="julkaisuvuosi"
            id="julkaisuvuosi"
            data-ng-model="justus.julkaisu.julkaisuvuosi"
            maxlength="4"
            pattern="^[0-9]{4}$"
            placeholder="{{ i18n.content.form.julkaisuvuosi.picktip[lang] }}"
            title="{{ julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisuvuosi.tooltipF[lang] : i18n.content.form.julkaisuvuosi.tooltip[lang] }}">
        </div>
      </div>
    </div>
  </div>

  <!-- Kenttä: Julkaisuvuodenlisätieto -->
  <div class="row form-group" data-ng-if="isFieldVisible('julkaisuvuodenlisatieto')" id="julkaisuvuodenlisatietoGroup">
    <div class="col-sm-4 col-xs-12">
      <label for="julkaisuvuodenlisatieto" class="control-label" data-ng-bind="i18n.content.form.julkaisuvuodenlisatieto[lang]">
      </label>
       <i data-ng-if="isFieldRequired('julkaisuvuodenlisatieto')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      <i class="fa fa-info-circle justus-info cursor-pointer"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{i18n.content.form.julkaisuvuodenlisatieto.tooltip[lang]}}"
         data-ng-show="i18n.content.form.julkaisuvuodenlisatieto.tooltip[lang]">
      </i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_julkaisuvuodenlisatieto" data-ng-required="requiredHighlight && !isValid('julkaisuvuodenlisatieto')">
      <div class="row">
        <div class="col-xs-12">
          <textarea id="julkaisuvuodenlisatieto"
                    name="julkaisuvuodenlisatieto"
                    class="form-control vertical-resize"
                    rows="1"
                    maxlength="1000"
                    placeholder="{{i18n.content.form.julkaisuvuodenlisatieto.picktip[lang]}}"
                    data-ng-model="justus.lisatieto.julkaisuvuodenlisatieto">
          </textarea>
        </div>
      </div>
    </div>
  </div>

  <!-- Kenttä: Julkaisun nimi -->
  <div class="row form-group"
       id="julkaisunnimiGroup"
       data-ng-if="isFieldVisible('julkaisunnimi')">
    <div class="col-sm-4 col-xs-12">
      <label for="julkaisunnimi" class="control-label"
             data-ng-bind="i18n.content.form.julkaisunnimi[lang]">
      </label>
      <i class="fa fa-info-circle justus-info cursor-pointer"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{ julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisunnimi.tooltipF[lang] : i18n.content.form.julkaisunnimi.tooltip[lang] }}"
         data-ng-show="i18n.content.form.julkaisunnimi.tooltip[lang]">
      </i>
      <i data-ng-if="isFieldRequired('julkaisunnimi')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_julkaisunnimi">
      <div class="row">
        <div class="col-xs-12">
          <input type="text" class="form-control"
                 id="julkaisunnimi"
                 name="julkaisunnimi"
                 data-ng-model="justus.julkaisu.julkaisunnimi"
                 placeholder="{{ i18n.content.form.julkaisunnimi.picktip[lang] }}">
        </div>
      </div>
    </div>
  </div>

  <!-- Kenttä: Tekijät -->
  <div class="row form-group" id="tekijatGroup" data-ng-if="isFieldVisible('tekijat')">
    <div class="col-sm-4 col-xs-12">
      <label id="julkaisuntekijat" class="control-label" data-ng-bind="i18n.content.form.tekijat[lang]"></label>
      <i class="fa fa-info-circle justus-info"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{i18n.content.form.tekijat.tooltip[lang]}}"
         data-ng-show="i18n.content.form.tekijat.tooltip[lang]">
      </i>
       <i data-ng-if="isFieldRequired('tekijat')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_tekijat">
      <div class="row">
        <div class="col-xs-12">
          <tags-input
                      role="input"
                      aria-labelledby="julkaisuntekijat"
                      data-ng-model="tekijatTags"
                      data-replace-spaces-with-dashes="false"
                      data-add-on-comma="false"
                      data-add-on-space="false"
                      placeholder="{{i18n.content.form.tekijat.picktip[lang]}}"
                      data-on-tag-added="useTekijat()"
                      data-on-tag-removed="useTekijat()"
                      enable-editing-last-tag="true"
                      allowed-tags-pattern="^[^,\;]+,[^,\;]+$">
          </tags-input>
        </div>
      </div>
    </div>
  </div>

  <!-- Kenttä: Julkaisun tekijöiden lukumäärä -->
  <div class="row form-group"
       id="julkaisuntekijoidenlukumaaraGroup"
       data-ng-if="isFieldVisible('julkaisuntekijoidenlukumaara')">
    <div class="col-sm-4 col-xs-12">
      <label for="julkaisuntekijoidenlukumaara" class="control-label"
             data-ng-bind="i18n.content.form.julkaisuntekijoidenlukumaara[lang]">
      </label>
      <i class="fa fa-info-circle justus-info"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisuntekijoidenlukumaara.tooltipF[lang] : i18n.content.form.julkaisuntekijoidenlukumaara.tooltip[lang]}}"
         data-ng-show="i18n.content.form.julkaisuntekijoidenlukumaara.tooltip[lang]">
      </i>
      <i data-ng-if="isFieldRequired('julkaisuntekijoidenlukumaara')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data"
         data-ng-model="req_julkaisuntekijoidenlukumaara">
      <div class="row">
        <div class="col-sm-5 col-xs-12">
          <input id="julkaisuntekijoidenlukumaara"
                 name="julkaisuntekijoidenlukumaara"
                 type="text"
                 class="form-control"
                 data-ng-model="justus.julkaisu.julkaisuntekijoidenlukumaara"
                 maxlength="2" pattern="^[0-9]*$">
          <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
        </div>
        <div class="col-xs-5 justus-data text-right">
          <button class="btn btn-primary justus-btn"
                  role="button"
                  data-ng-click="useKopioiTekijat(justus.julkaisu.tekijat)"
                  data-ng-show="justus.julkaisu.tekijat && !(justus.organisaatiotekija[0].sukunimi || justus.organisaatiotekija[0].etunimet)"
                  data-popover-trigger="'mouseenter'"
                  data-popover-placement="right"
                  data-uib-popover="{{i18n.content.form.organisaatiotekija.kopioi.tooltip[lang]}}"
                  data-ng-bind="i18n.content.form.organisaatiotekija.kopioi[lang]">
          </button>
        </div>
      </div>
    </div>
  </div>


  <!-- Kenttä alayksikön vuosivalinta, hide from members, set default as 2020-->
  <div data-ng-if="isFieldVisible('alayksikko')"
       data-ng-show="user.role !== 'member'" class="row form-group">
    <div class="col-xs-12 col-sm-4">
      <label id="vuosivalinta" data-ng-bind="i18n.content.form.organisaatiotekija.alayksikkovuosi[lang]">
      </label>
      <i class="fa fa-info-circle justus-info"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{i18n.content.form.organisaatiotekija.alayksikkovuosi.tooltip[lang]}}">
      </i>
    </div>
    <div class="col-xs-12 col-sm-5">
      <ui-select data-ng-model="alayksikkovuosi.selected"
                 role="listbox"
                 aria-labelledby="vuosivalinta"
                 theme="bootstrap">
        <ui-select-match class="ui-select-match"
                         data-ng-value="alayksikkovuosi.selected"
                         placeholder="{{i18n.content.form.organisaatiotekija.alayksikkovuosi.picktip[lang]}}">
          {{ $select.selected.label }}
        </ui-select-match>
        <ui-select-choices
                repeat="ala in alayksikkovuodet"
                role="option">
          {{ala.label}}
        </ui-select-choices>
      </ui-select>
    </div>
  </div>

  <!-- Kenttä: Organisaation tekijät -->
  <div class="row form-group"
       data-ng-if="isFieldVisible('organisaatiotekija')">
    <div class="col-sm-4 col-xs-12" id="organisaatiotekijaGroup">
      <label class="control-label" data-ng-bind="i18n.content.form.organisaatiotekija[lang]"></label>
      <i class="fa fa-info-circle justus-info"
         data-popover-trigger="'outsideClick'"
         data-popover-is-open="popoverIsOpen"
         data-ng-mouseenter="popoverIsOpen = true"
         data-popover-placement="right"
         data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.organisaatiotekija.tooltipF[lang] : i18n.content.form.organisaatiotekija.tooltip[lang]}}"
         data-ng-show="i18n.content.form.organisaatiotekija.tooltip[lang]">
      </i>
      <i data-ng-if="isFieldRequired('organisaatiotekija')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
    </div>
    <div class="col-sm-8 col-xs-12 justus-data">
      <div data-ng-repeat="i in justus.organisaatiotekija track by $index"
           class="row"
           data-ng-model="req_organisaatiotekija[$index]">
        <div class="col-xs-10">
          <div class="row form-group" id="organisaatiotekijaRow">
            <div class="col-xs-12 col-sm-6 sukunimiGroup"
                 validate-organisaatiotekijat-directive validate="validateState"
                 field="sukunimi"
                 value="justus.organisaatiotekija[$index].sukunimi">
              <input
                      aria-label="organisaatiotekijasukunimi"
                      name="organisaatiotekijasukunimi"
                      type="text"
                      class="form-control"
                      data-ng-model="justus.organisaatiotekija[$index].sukunimi"
                      placeholder="{{i18n.content.form.organisaatiotekija.sukunimi.picktip[lang]}}">
              <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
            </div>
            <div class="col-xs-12 col-sm-6 etunimetGroup"
                 validate-organisaatiotekijat-directive validate="validateState" field="etunimet"
                 value="justus.organisaatiotekija[$index].etunimet">
              <input
                      aria-label="organisaatiotekijaetunimet"
                      name="organisaatiotekijaetunimet"
                      type="text"
                      class="form-control"
                      data-ng-model="justus.organisaatiotekija[$index].etunimet"
                      placeholder="{{i18n.content.form.organisaatiotekija.etunimet.picktip[lang]}}">
            </div>
          </div>

          <div class="row form-group">
            <div data-ng-if="isFieldVisible('alayksikko')" class="col-xs-12 col-sm-6 form-group"
                 validate-organisaatiotekijat-directive validate="validateState" field="orcid"
                 value="justus.organisaatiotekija[$index].orcid">
              <input
                      aria-label="orcid"
                      name="orcid"
                      type="text" class="form-control"
                      data-ng-model="justus.organisaatiotekija[$index].orcid"
                      placeholder="{{i18n.content.form.organisaatiotekija.orcid.picktip[lang]}}">
            </div>
            <!-- Kenttä hr numero, currently visible only for Luonnonvarakeskus -->
            <div data-ng-if="isFieldVisible('hrnumero')" id="hrGroup" class="col-xs-12 col-sm-6 form-group">
              <input
                      aria-label="hrnumero"
                      name="hrnumero"
                      type="text" class="form-control"
                      data-ng-model="justus.organisaatiotekija[$index].hrnumero"
                      placeholder="{{i18n.content.form.organisaatiotekija.hrnumero.picktip[lang]}}">
              <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
            </div>
            <!-- Kenttä: Tekijän rooli taidejulkaisuille -->
            <div data-ng-if="isFieldVisible('tekijanrooli')" id="rooliGroup" class="col-xs-12 col-sm-6 form-group">
              <ui-select
                      role="listbox"
                      aria-label="organisaatiotekijarooli"
                      data-ng-model="rooli.selected"
                      on-select="useOrganisaatiotekijaRooli($index,$select.selected)"
                      theme="bootstrap">
                <ui-select-match class="ui-select-match"
                                 data-ng-value="justus.organisaatiotekija[$index].rooli"
                                 placeholder="{{justus.organisaatiotekija[$index].rooli}} {{getSelite(codes.julkaisuntekijanrooli ,justus.organisaatiotekija[$index].rooli) || i18n.content.form.organisaatiotekija.tekijanrooli.picktip[lang]}}">
                  {{ $select.selected.arvo }} {{ $select.selected.selite }}
                </ui-select-match>
                <ui-select-choices role="option"
                                   repeat="role in codes.julkaisuntekijanrooli | orderBy: 'arvo' | filter: $select.search">
                  {{role.arvo}} {{role.selite }}
                </ui-select-choices>
              </ui-select>
            </div>

            <div data-ng-if="isFieldVisible('alayksikko')" class="col-xs-12">
              <div data-ng-repeat="ota in justus.organisaatiotekija[$index].alayksikko track by $index"
                   data-ng-init="pIx=$parent.$index" class="row">
                <div class="col-xs-11 col-sm-11 mb-x"
                     validate-organisaatiotekijat-directive validate="validateState"
                     field="alayksikko" value="ota">
                  <ui-select
                          role="listbox"
                          aria-label="alayksikko"
                          data-ng-model="alayksikko.selected"
                          on-select="useOrganisaatiotekijaAlayksikko(pIx,$index,$select.selected.arvo)"
                          theme="bootstrap"
                          class="dropdown-height-350">
                    <ui-select-match class="ui-select-match"
                                     placeholder="{{ ota }} {{ getSelite(user.alayksikot, ota)|| i18n.content.form.organisaatiotekija.alayksikko.picktip[lang]}}">
                      {{ ota }} {{ getSelite(user.alayksikot, ota) }}
                    </ui-select-match>
                    <ui-select-choices role="option"
                                       repeat="o in getAlayksikkoData(alayksikkovuosi.selected) | filter: $select.search">
                      {{ getArvo(o.arvo)}} {{o.selite}}
                    </ui-select-choices>
                  </ui-select>
                </div>
                <div>
                  <div class="col-xs-1 col-sm-1 pl-0">
                    <button role="button"
                            class="btn btn-danger" data-ng-class="{'mb-x': $last}"
                            data-ng-click="removeAlayksikko($parent.$index, $index)"
                            data-ng-hide="justus.organisaatiotekija[$parent.$index].alayksikko.length<2"
                            title="{{i18n.content.form.organisaatiotekija.poista.tooltip[lang]}}"
                            data-ng-bind="i18n.content.form.organisaatiotekija.poista[lang]">
                    </button>
                    <button role="button"
                            class="btn btn-primary"
                            data-ng-click="justus.organisaatiotekija[$parent.$index].alayksikko.push('')"
                            data-ng-show="($index == justus.organisaatiotekija[$parent.$index].alayksikko.length-1 && a!='')"
                            title="{{i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]}}"
                            data-ng-bind="i18n.content.form.organisaatiotekija.lisaa[lang]">
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xs-2">
          <button
                  type="button"
                  class="btn btn-danger mb-x"
                  data-ng-click="justus.organisaatiotekija.splice($index, 1)"
                  data-ng-hide="justus.organisaatiotekija.length<2"
                  title="{{i18n.content.form.organisaatiotekija.poista.tooltip[lang]}}"
                  data-ng-bind="i18n.content.form.organisaatiotekija.poista.tooltip[lang]">
          </button>
          <button
                  type="button"
                  class="btn btn-primary"
                  data-ng-click="addOrganisaatiotekija()"
                  data-ng-hide="$index < justus.organisaatiotekija.length-1"
                  title="{{i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]}}"
                  data-ng-bind="i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]">
          </button>
        </div>
      </div>
    </div>
  </div>

   <!-- Kenttä: Projektinumero -->
    <div class="row form-group"
         id="projektinumeroGroup"
         data-ng-if="isFieldVisible('projektinumero')">
      <div class="col-sm-4 col-xs-12">
        <label for="projektinumero" class="control-label"
               data-ng-bind="i18n.content.form.projektinumero[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{ i18n.content.form.projektinumero.tooltip[lang] }}"
           data-ng-show="i18n.content.form.projektinumero.tooltip[lang]">
        </i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-xs-8">
            <div data-ng-repeat="projektinumero in justus.julkaisu.projektinumero track by $index"
                 data-ng-class="{'mb-x':($index !== $last)}">
              <input
                      id="projektinumero"
                      name="projektinumero"
                      type="text"
                      class="form-control "
                      data-ng-model="justus.julkaisu.projektinumero[$index]"
                      placeholder="{{ i18n.content.form.projektinumero[lang] }}">
              <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="p-b mb-x">
              <button
                      type="button"
                      class="btn btn-primary"
                      data-ng-click="justus.julkaisu.projektinumero.push('')"
                      title="{{i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]}}"
                      data-ng-bind="i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]">
              </button>
            </div>
            <div>
              <button
                      type="button"
                      class="btn btn-primary"
                      data-ng-click="justus.julkaisu.projektinumero.splice(justus.julkaisu.projektinumero.length-1, 1)"
                      data-ng-hide="justus.julkaisu.projektinumero.length<2 || $index === '0'"
                      title="{{i18n.content.form.organisaatiotekija.poista.tooltip[lang]}}"
                      data-ng-bind="i18n.content.form.organisaatiotekija.poista.tooltip[lang]">
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <h3 class="form-header">{{i18n.content.tietojensyotto.bibliografiset[lang]}}</h3>

  <div class="px">
  <!-- julkaisutyypistä riippuvat -->
  <!-- Kenttä: Konferenssin vakiintunut nimi -->
    <div class="row form-group"
         data-ng-if="isFieldVisible('konferenssinvakiintunutnimi')"
         id="konferenssinvakiintunutnimiGroup">
      <div class="col-sm-4 col-xs-12">
        <label
                for="konferenssinvakiintunutnimi"
                class="control-label"
                data-ng-bind="i18n.content.form.konferenssinvakiintunutnimi[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.konferenssinvakiintunutnimi.tooltip[lang]}}"
           data-ng-show="i18n.content.form.konferenssinvakiintunutnimi.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('konferenssinvakiintunutnimi')" class="fa fa-asterisk required-star"
           aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data"
           data-ng-model="req_konferenssinvakiintunutnimi">
        <div class="row">
          <div class="col-xs-12">
            <input
                    id="konferenssinvakiintunutnimi"
                    name="konferenssinvakiintunutnimi"
                    type="text" class="form-control"
                    data-ng-model="justus.julkaisu.konferenssinvakiintunutnimi"
                    data-uib-typeahead="konferenssinimet.Name for konferenssinimet in refreshKanavanimet(3,$viewValue)"
                    data-typeahead-loading="jufoKonferenssiLataa" data-typeahead-no-results="jufoNoResults"
                    data-typeahead-wait-ms="2000"
                    placeholder="{{i18n.content.form.konferenssinvakiintunutnimi.picktip[lang]}}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Emojulkaisun nimi -->
    <div class="row form-group"
         data-ng-if="isFieldVisible('emojulkaisunnimi')"
         id="emojulkaisunnimiGroup">
      <div class="col-sm-4 col-xs-12">
        <label for="emojulkaisunnimi" class="control-label"
               data-ng-bind="i18n.content.form.emojulkaisunnimi[lang]"></label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{ julkaisutyyppi_paa == 'F' ? i18n.content.form.emojulkaisunnimi.tooltipF[lang] : i18n.content.form.emojulkaisunnimi.tooltip[lang] }}"
           data-ng-show="i18n.content.form.emojulkaisunnimi.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('emojulkaisunnimi')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-xs-12">
            <input
                    id="emojulkaisunnimi"
                    name="emojulkaisunnimi"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.emojulkaisunnimi"
                    placeholder="{{ i18n.content.form.emojulkaisunnimi.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: ISBN :: nb! isbn vs issn. -->
    <div class="row form-group" data-ng-if="isFieldVisible('isbn')" id="isbnGroup">
      <div class="col-sm-4 col-xs-12">
        <label for="isbn" class="control-label" data-ng-bind="i18n.content.form.isbn[lang]"></label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.isbn.tooltipF[lang] : i18n.content.form.isbn.tooltip[lang]}}"
           data-ng-show="i18n.content.form.isbn.tooltip[lang]"></i>
        <i data-ng-if="isFieldRequired('isbn')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-xs-9">
            <div data-ng-repeat="isbn in justus.julkaisu.isbn track by $index" data-ng-class="{'mb-x':$first}">
              <input
                      id="isbn"
                      name="isbn"
                      type="text"
                      class="form-control"
                      data-ng-model="justus.julkaisu.isbn[$index]">
            </div>
          </div>
          <div class="col-xs-3">
            <div class="p-b mb-x">
              <button
                      type="button"
                      class="btn btn-primary"
                      data-ng-click="justus.julkaisu.isbn.push('')"
                      data-ng-disabled="justus.julkaisu.isbn.length>1"
                      title="{{i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]}}"
                      data-ng-bind="i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]">
              </button>
            </div>
            <div>
              <button
                      type="button"
                      class="btn btn-danger"
                      data-ng-click="justus.julkaisu.isbn.splice(justus.julkaisu.isbn.length-1, 1)"
                      data-ng-hide="justus.julkaisu.isbn.length<2 || $index === '0'"
                      title="{{i18n.content.form.organisaatiotekija.poista.tooltip[lang]}}"
                      data-ng-bind="i18n.content.form.organisaatiotekija.poista.tooltip[lang]">
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Emojulkaisun toimittajat -->
    <div class="row form-group"
         data-ng-if="isFieldVisible('emojulkaisuntoimittajat')"
         id="emojulkaisuntoimittajatGroup">
      <div class="col-sm-4 col-xs-12">
        <label
                id="emojulkaisuntoimittajat"
                class="control-label"
                data-ng-bind="i18n.content.form.emojulkaisuntoimittajat[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.emojulkaisuntoimittajat.tooltip[lang]}}"
           data-ng-show="i18n.content.form.emojulkaisuntoimittajat.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('emojulkaisuntoimittajat')" class="fa fa-asterisk required-star"
           aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-xs-12">
            <tags-input
                    aria-labelledby="emojulkaisuntoimittajat"
                    data-ng-model="emojulkaisuntoimittajatTags"
                    data-replace-spaces-with-dashes="false"
                    data-add-on-comma="false"
                    data-add-on-space="false"
                    placeholder="{{i18n.content.form.tekijat.picktip[lang]}}"
                    data-on-tag-added="useEmojulkaisuntoimittajat()"
                    data-on-tag-removed="useEmojulkaisuntoimittajat()"
                    enable-editing-last-tag="true"
                    allowed-tags-pattern="^[^,\;]+,[^,\;]+$">
            </tags-input>
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Lehden / julkaisusarjan nimi :: näkyy aina -->
    <div class="row form-group"
         id="lehdenjulkaisusarjannimiGroup"
         data-ng-if="isFieldVisible('lehdenjulkaisusarjannimi')">
      <div class="col-sm-4 col-xs-12">
        <label for="lehdenjulkaisusarjannimi"
               class="control-label"
               data-ng-bind="i18n.content.form.lehdenjulkaisusarjannimi[lang]"></label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.lehdenjulkaisusarjannimi.tooltip[lang]}}"
           data-ng-show="i18n.content.form.lehdenjulkaisusarjannimi.tooltip[lang]"></i>
        <i data-ng-if="isFieldRequired('lehdenjulkaisusarjannimi')" class="fa fa-asterisk required-star"
           aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-xs-11">
            <input
                    id="lehdenjulkaisusarjannimi"
                    name="lehdenjulkaisusarjannimi"
                    type="text" class="form-control"
                    data-ng-model="justus.julkaisu.lehdenjulkaisusarjannimi"
                    data-uib-typeahead="nimet.Name for nimet in refreshKanavanimet(1,$viewValue)"
                    data-typeahead-loading="jufoLataa"
                    data-typeahead-no-results="jufoNoResults"
                    data-typeahead-wait-ms="2000"
                    placeholder="{{i18n.content.form.lehdenjulkaisusarjannimi.picktip[lang]}}"
                    data-typeahead-on-select="useLehtisarja($item.Jufo_ID)">
          </div>
          <div class="col-xs-1">
            <i class='fa fa-spinner fa-spin fa-2x' data-ng-show='jufoLataa'></i>
          </div>
        </div>
        <!-- näytä valitun lehden/sarjan tietoja -->
        <div class="row" data-ng-show="justus.julkaisu.jufotunnus || justus.julkaisu.jufoluokitus">
          <div class="col-xs-12">
            <input type="hidden"
                   data-ng-model="justus.julkaisu.jufotunnus">
            <input type="hidden"
                   data-ng-model="justus.julkaisu.jufoluokitus">
            <!-- TODO show or not? -->
            <span data-ng-show="justus.julkaisu.jufotunnus">
            {{i18n.content.form.jufotunnus[lang]}}: {{justus.julkaisu.jufotunnus}}</span>
            <span data-ng-show="justus.julkaisu.jufotunnus && justus.julkaisu.jufoluokitus">,</span>
            <span data-ng-show="justus.julkaisu.jufoluokitus">
            {{i18n.content.form.jufoluokitus[lang]}}: {{justus.julkaisu.jufoluokitus}}
          </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: ISSN :: nb! issn vs isbn. required-ehto toimii vaikka isbn:ää ei lomakkeella olisikaan :: näkyy aina -->
    <div class="row form-group"
         id="issnGroup"
         data-ng-if="isFieldVisible('issn')">
      <div class="col-sm-4 col-xs-12">
        <label for="issn"
               class="control-label"
               data-ng-bind="i18n.content.form.issn[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{ julkaisutyyppi_paa == 'F' ? i18n.content.form.issn.tooltipF[lang] : i18n.content.form.issn.tooltip[lang] }}"
           data-ng-show="i18n.content.form.issn.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('issn')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row" data-ng-repeat="issn in justus.julkaisu.issn track by $index" data-ng-class="{'mb-x':$first}">
          <div class="col-md-6 col-xs-9">
            <input type="text"
                   id="issn"
                   name="issn"
                   class="form-control"
                   data-ng-model="justus.julkaisu.issn[$index]"
                   placeholder="1234-567X">
            <span data-ng-if="issnDescription[$index]">{{issnDescription[$index]}}</span>
          </div>
          <div class="col-md-6 col-xs-3">
            <button
                    type="button"
                    class="btn btn-primary"
                    data-ng-show="$index === 0 && justus.julkaisu.issn.length === 1"
                    data-ng-click="justus.julkaisu.issn.push('')"
                    data-ng-disabled="justus.julkaisu.issn.length>1"
                    title="{{i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]}}"
                    data-ng-bind="i18n.content.form.organisaatiotekija.lisaa.tooltip[lang]">
            </button>
            <button
                    type="button"
                    class="btn btn-danger"
                    data-ng-click="removeIssn($index)"
                    data-ng-hide="justus.julkaisu.issn.length<2 || $index === '0'"
                    title="{{i18n.content.form.organisaatiotekija.poista.tooltip[lang]}}"
                    data-ng-bind="i18n.content.form.organisaatiotekija.poista.tooltip[lang]">
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Volyymi :: näkyy aina -->
    <div class="row form-group"
         id="volyymiGroup"
         data-ng-if="isFieldVisible('volyymi')">
      <div class="col-sm-4 col-xs-12">
        <label
                for="volyymi"
                class="control-label"
                data-ng-bind="i18n.content.form.volyymi[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.volyymi.tooltip[lang]}}"
           data-ng-show="i18n.content.form.volyymi.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('volyymi')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-md-4 col-xs-12">
            <input
                    id="volyymi"
                    name="volyymi"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.volyymi"
                    placeholder="{{ i18n.content.form.volyymi.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Numero :: näkyy aina -->
    <div class="row form-group" id="numeroGroup" data-ng-if="isFieldVisible('numero')">
      <div class="col-sm-4 col-xs-12 col-md-4">
        <label for="numero" class="control-label" data-ng-bind="i18n.content.form.numero[lang]"></label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.numero.tooltip[lang]}}"
           data-ng-show="i18n.content.form.numero.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('numero')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-md-4 cols-xs-12">
            <input
                    id="numero"
                    name="numero"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.numero"
                    placeholder="{{ i18n.content.form.numero.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Sivut -->
    <div class="row form-group" id="sivutGroup" data-ng-if="isFieldVisible('sivut')">
      <div class="col-sm-4 col-xs-12 col-md-4">
        <label
                for="sivut"
                class="control-label"
                data-ng-bind="i18n.content.form.sivut[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.sivut.tooltip[lang]}}"
           data-ng-show="i18n.content.form.sivut.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('sivut')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-md-4 col-xs-12">
            <input
                    id="sivut"
                    name="sivut"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.sivut"
                    placeholder="{{ i18n.content.form.sivut.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Artikkelinumero -->
    <div class="row form-group"
         data-ng-show="isFieldVisible('artikkelinumero')"
         id="artikkelinumeroGroup">
      <div class="col-sm-4 col-xs-12 col-md-4">
        <label for="artikkelinumero" class="control-label"
               data-ng-bind="i18n.content.form.artikkelinumero[lang]"></label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{i18n.content.form.artikkelinumero.tooltip[lang]}}"
           data-ng-show="i18n.content.form.artikkelinumero.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('artikkelinumero')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-md-4 col-xs-12">
            <input
                    id="artikkelinumero"
                    name="artikkelinumero"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.artikkelinumero"
                    placeholder="{{ i18n.content.form.artikkelinumero.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Kustantaja -->
    <div class="row form-group" data-ng-if="isFieldVisible('kustantaja')" id="kustantajaGroup">
      <div class="col-sm-4 col-xs-12">
        <label
                for="kustantaja"
                class="control-label"
                data-ng-bind="i18n.content.form.kustantaja[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.kustantaja.tooltipF[lang] : i18n.content.form.kustantaja.tooltip[lang]}}"
           data-ng-show="i18n.content.form.kustantaja.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('kustantaja')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data"
           data-ng-model="req_kustantaja" data-ng-required="requiredHighlight && !isValid('kustantaja')">
        <div class="row">
          <div class="col-xs-11">
            <input
                  id="kustantaja"
                  name="kustantaja"
                  type="text" class="form-control"
                  data-ng-model="justus.julkaisu.kustantaja"
                  data-uib-typeahead="kustantajanimet.Name for kustantajanimet in refreshKanavanimet(2,$viewValue)"
                  data-typeahead-loading="jufoKustantajaLataa"
                  data-typeahead-no-results="jufoNoResults"
                  data-typeahead-wait-ms="2000"
                  placeholder="{{i18n.content.form.kustantaja.picktip[lang]}}">
          </div>
          <div class="col-xs-1">
            <i class='fa fa-spinner fa-spin fa-lg' data-ng-show='jufoKustantajaLataa'></i>
          </div>
        </div>
      </div>
    </div>

    <!-- Kenttä: Julkaisun kustannuspaikka -->
    <div class="row form-group"
         data-ng-if="isFieldVisible('julkaisunkustannuspaikka')"
         id="julkaisunkustannuspaikkaGroup">
      <div class="col-sm-4 col-xs-12">
        <label
                for="julkaisunkustannuspaikka"
                class="control-label"
                data-ng-bind="i18n.content.form.julkaisunkustannuspaikka[lang]">
        </label>
        <i class="fa fa-info-circle justus-info"
           data-popover-trigger="'outsideClick'"
           data-popover-is-open="popoverIsOpen"
           data-ng-mouseenter="popoverIsOpen = true"
           data-popover-placement="right"
           data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisunkustannuspaikka.tooltipF[lang] : i18n.content.form.julkaisunkustannuspaikka.tooltip[lang]}}"
           data-ng-show="i18n.content.form.julkaisunkustannuspaikka.tooltip[lang]">
        </i>
        <i data-ng-if="isFieldRequired('julkaisunkustannuspaikka')" class="fa fa-asterisk required-star"
           aria-hidden="true"></i>
      </div>
      <div class="col-sm-8 col-xs-12 justus-data">
        <div class="row">
          <div class="col-md-4 col-xs-12">
            <input
                    id="julkaisunkustannuspaikka"
                    name="julkaisunkustannuspaikka"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.julkaisunkustannuspaikka"
                    placeholder="{{ i18n.content.form.julkaisunkustannuspaikka.picktip[lang] }}">
          </div>
        </div>
      </div>
    </div>
</div>

  <h3 class="form-header">{{i18n.content.tietojensyotto.muut[lang]}}</h3>

   <div class="px">
  <!-- loput kentät -->
  <!-- Kenttä: Avainsanat -->
     <div class="row form-group" id="avainsanatGroup" data-ng-if="isFieldVisible('avainsanat')">
       <div class="col-sm-4 col-xs-12">
         <label id="avainsanat" class="control-label" data-ng-bind="i18n.content.form.avainsanat[lang]"></label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.avainsanat.tooltip[lang]}}"
            data-ng-show="i18n.content.form.avainsanat.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('avainsanat')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <tags-input
                 aria-labelledby="avainsanat"
                 data-ng-model="avainsanatTags"
                 data-replace-spaces-with-dashes="false"
                 data-add-on-comma="false"
                 data-add-on-space="false"
                 placeholder="{{i18n.content.form.avainsanat.picktip[lang]}}"
                 data-on-tag-added="addAvainsana($tag)"
                 data-on-tag-removed="removeAvainsana()"
                 data-enable-editing-last-tag="true"
                 display-property="prefLabel"
                 track-by-expr="$index"
                 data-add-on-blur="false"
                 data-min-length="1">
           <auto-complete
                   data-source="refreshAvainsanat($query)"
                   data-load-on-down-arrow="true"
                   data-min-length="1"
                   data-debounce-delay="200"
                   data-select-first-match="true"
                   max-results-to-show="300">
           </auto-complete>
         </tags-input>
       </div>
     </div>

     <!-- Kenttä: Julkaisun kieli -->
     <div class="row form-group" id="julkaisunkieliGroup" data-ng-if="isFieldVisible('julkaisunkieli')">
       <div class="col-sm-4 col-xs-12">
         <label for="julkaisunkieli" class="control-label"
                data-ng-bind="i18n.content.form.julkaisunkieli[lang]"></label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisunkieli.tooltipF[lang] : i18n.content.form.julkaisunkieli.tooltip[lang]}}"
            data-ng-show="i18n.content.form.julkaisunkieli.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('julkaisunkieli')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <div class="row">
           <div class="col-xs-12">
             <input type="text"
                    id="julkaisunkieli"
                    name="julkaisunkieli"
                    class="form-control"
                    data-ng-model="sel_julkaisunkieli"
                    data-ng-value="getSelite(codes.kieli, justus.julkaisu.julkaisunkieli.toUpperCase())"
                    data-uib-typeahead="o.selite for o in codes['kieli'] | filter: $viewValue"
                    placeholder="{{i18n.content.form.julkaisunkieli.picktip[lang]}}"
                    data-typeahead-on-select="useField('julkaisu','julkaisunkieli',$item.arvo.toLowerCase())"
                    data-typeahead-editable="false">
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Julkaisun kansainvälisyys -->
     <div class="row form-group"
          id="julkaisunkansainvalisyysGroup"
          data-ng-if="isFieldVisible('julkaisunkansainvalisyys')">
       <div class="col-sm-4 col-xs-12">
         <label class="control-label"
                data-ng-bind="i18n.content.form.julkaisunkansainvalisyys[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisunkansainvalisyys.tooltipF[lang] : i18n.content.form.julkaisunkansainvalisyys.tooltip[lang]}}"
            data-ng-show="i18n.content.form.julkaisunkansainvalisyys.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('julkaisunkansainvalisyys')" class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_julkaisunkansainvalisyys">
         <div class="row">
           <div class="col-xs-10">
             <input type="radio"
                    id="kansainvalinen"
                    data-ng-model="justus.julkaisu.julkaisunkansainvalisyys"
                    value="1">
             <label for="kansainvalinen" data-ng-model="lab1_julkaisunkansainvalisyys"
                    class="control-label">
               {{i18n.content.form.julkaisunkansainvalisyys['1'][lang]}}
             </label>
             <input  type="radio"
                     id="kotimainen"
                     data-ng-model="justus.julkaisu.julkaisunkansainvalisyys"
                     value="0">
             <label for="kotimainen" data-ng-model="lab2_julkaisunkansainvalisyys"
                    class="control-label">
               {{i18n.content.form.julkaisunkansainvalisyys['0'][lang]}}
             </label>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Julkaisumaa -->
     <div class="row form-group" data-ng-if="isFieldVisible('julkaisumaa')" id="julkaisumaaGroup">
       <div class="col-sm-4 col-xs-12">
         <label for="julkaisumaa"
                class="control-label"
                data-ng-bind="i18n.content.form.julkaisumaa[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.julkaisumaa.tooltipF[lang] : i18n.content.form.julkaisumaa.tooltip[lang]}}"
            data-ng-show="i18n.content.form.julkaisumaa.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('julkaisumaa')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <div class="row">
           <div class="col-xs-12">
             <input
                     id="julkaisumaa"
                     name="julkaisumaa"
                     type="text"
                     class="form-control"
                     data-ng-value="getSelite(codes.maatjavaltiot2 ,justus.julkaisu.julkaisumaa)"
                     data-ng-model="sel_julkaisumaa"
                     data-uib-typeahead="o.arvo+' '+o.selite for o in codes['maatjavaltiot2'] | filter: $viewValue"
                     data-typeahead-on-select="useField('julkaisu','julkaisumaa',$item.arvo)"
                     data-typeahead-editable="false"
                     placeholder="{{ i18n.content.form.julkaisumaa.picktip[lang] }}">
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Julkistamispaikkakunta -->
     <div class="row form-group" data-ng-if="isFieldVisible('julkistamispaikkakunta')" id="julkistamispaikkakuntaGroup">
       <div class="col-sm-4 col-xs-12">
         <label for="julkistamispaikkakunta"
                class="control-label"
                data-ng-bind="i18n.content.form.julkistamispaikkakunta[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.julkistamispaikkakunta.tooltip[lang]}}"
            data-ng-show="i18n.content.form.julkistamispaikkakunta.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('julkistamispaikkakunta')"
            class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="justus.lisatieto.julkistamispaikkakunta"
            data-ng-required="requiredHighlight && !isValid('julkistamispaikkakunta')">
         <div class="row">
           <div class="col-xs-12">
            <textarea
                    id="julkistamispaikkakunta"
                    name="julkistamispaikkakunta"
                    class="form-control vertical-resize"
                    rows="1"
                    maxlength="1000"
                    placeholder="{{i18n.content.form.julkistamispaikkakunta.picktip[lang]}}"
                    data-ng-model="justus.lisatieto.julkistamispaikkakunta" style="height: 40px">
            </textarea>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Tapahtuman lisätieto -->
     <div class="row form-group" data-ng-if="isFieldVisible('tapahtumanlisatieto')" id="tapahtumalisatietoGroup">
       <div class="col-sm-4 col-xs-12">
         <label for="tapahtumanlisatieto" class="control-label"
                data-ng-bind="i18n.content.form.tapahtumanlisatieto[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.tapahtumanlisatieto.tooltip[lang]}}"
            data-ng-show="i18n.content.form.tapahtumanlisatieto.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('lisatieto')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_tapahtuma" data-ng-required="requiredHighlight && !isValid('lisatieto')">
         <div class="row">
           <div class="col-xs-12">
            <textarea id="tapahtumanlisatieto"
                      name="tapahtumanlisatieto"
                      class="form-control vertical-resize"
                      rows="1"
                      maxlength="1000"
                      placeholder="{{i18n.content.form.tapahtumanlisatieto.picktip[lang]}}"
                      data-ng-model="justus.lisatieto.tapahtuma">
            </textarea>
           </div>
         </div>
       </div>
     </div>


     <!-- Kenttä: Julkaisun tieteenala -->
     <div class="row form-group"
          id="tieteenalaGroup"
          data-ng-if="isFieldVisible('tieteenala')">
       <div class="col-sm-4 col-xs-12">
         <label for="tieteenala"
                class="control-label"
                data-ng-bind="i18n.content.form.tieteenala[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.tieteenala.tooltipF[lang] : i18n.content.form.tieteenala.tooltip[lang]}}"
            data-ng-show="i18n.content.form.tieteenala.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('tieteenala')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <div data-ng-repeat="i in justus.tieteenala track by $index"
              class="row">
           <div class="col-xs-10">
             <div class="form-group">
               <input
                       id="tieteenala"
                       name="tieteenala"
                       type="text"
                       data-ng-disabled="true"
                       class="form-control"
                       data-ng-model="lab_tieteenala$index"
                       data-ng-value="i.tieteenalakoodi+' '+getSelite(codes.tieteenalat, i.tieteenalakoodi)">
               <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
             </div>
           </div>
           <div class="col-xs-2">
             <button type="button"
                     class="btn btn-danger m-b"
                     data-ng-click="justus.tieteenala.splice($index, 1)"
                     data-ng-if="justus.tieteenala.length >= 2 && (justus.tieteenala.length - 1) !== $index"
                     title="{{i18n.content.form.tieteenala.poista.tooltip[lang]}}"
                     data-ng-bind="i18n.content.form.tieteenala.poista.tooltip[lang]">
             </button>
           </div>
         </div>
         <div class="row">
           <div class="col-sm-5 col-xs-12 form-group">
             <ui-select
                     role="listbox"
                     aria-label="paatieteenala"
                     data-ng-model="tieteenala.selected"
                     on-select="useTieteenala($select.selected)"
                     theme="bootstrap">
               <ui-select-match class="ui-select-match"

                                placeholder="{{i18n.content.form.tieteenala.paa.picktip[lang]}}">
                 {{ $select.selected.arvo }} {{ $select.selected.selite }}
               </ui-select-match>
               <ui-select-choices role="option"
                                  repeat="o in codes.tieteenalat | orderBy: 'arvo' | filter: $select.search">
                 {{o.arvo}} {{o.selite}}
               </ui-select-choices>
             </ui-select>
           </div>
           <div class="col-sm-7 col-xs-12 form-group"
                data-ALWAYS-ng-show="tieteenala_paa">
             <div data-ng-repeat="p in codes.tieteenalat"
                  data-ng-if="p.arvo==tieteenala_paa">
               <ui-select
                       role="listbox"
                       aria-label="alatieteenala"
                       data-ng-model="alatieteenalat.selected"
                       on-select="useTieteenala($select.selected)"
                       theme="bootstrap">
                 <ui-select-match class="ui-select-match"
                                  allow-clear="true"
                                  placeholder="{{i18n.content.form.tieteenala.ala.picktip[lang]}}">
                   {{ $select.selected.arvo }} {{ $select.selected.selite }}
                 </ui-select-match>
                 <ui-select-choices role="option"
                                    repeat="o in alatieteenalat | orderBy: 'arvo' | filter: $select.search">
                   {{o.arvo}} {{o.selite }}
                 </ui-select-choices>
               </ui-select>
             </div>
             <!--dev--><!-- when paatieteenala not selected/used above --><!--enddev-->
             <!--dev--><!-- hack... now parent.index... --><!--enddev-->
               <div data-ng-if="!tieteenala_paa">
                 <ui-select data-ng-model="alatieteenalat.selected"
                            on-select="useTieteenala($select.selected)"
                            theme="bootstrap">
                   <ui-select-match class="ui-select-match"
                                    placeholder="{{i18n.content.form.tieteenala.ala.picktip[lang]}}">
                     {{ $select.selected.arvo }} {{ $select.selected.selite }}
                   </ui-select-match>
                   <ui-select-choices repeat="o in getAlltieteenalat() | orderBy: 'arvo'"
                                      ui-disable-choice="o.nogo">
                     {{o.arvo}} {{o.selite }}
                   </ui-select-choices>
                 </ui-select>
               </div>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Julkaisun taiteenala -->
     <div class="row form-group"
          id="taiteenalaGroup"
          data-ng-if="isFieldVisible('taiteenala')">
       <div class="col-sm-4 col-xs-12">
         <label
                 for="taiteenala"
                 class="control-label"
                 data-ng-bind="i18n.content.form.taiteenala[lang]"
         >
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.taiteenala.tooltip[lang]}}"
            data-ng-show="i18n.content.form.taiteenala.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('taiteenala')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-xs-10 col-sm-8 justus-data">
         <div data-ng-repeat="i in justus.taiteenala track by $index" class="row">
           <div class="col-xs-10">
             <div class="form-group">
               <input
                       id="taiteenala"
                       name="taiteenala"
                       type="text"
                       data-ng-disabled="true"
                       class="form-control"
                       data-ng-model="lab_taiteenala$index"
                       data-ng-value="i.taiteenalakoodi+' '+getSelite(codes.taiteenalat, i.taiteenalakoodi)">
             </div>
           </div>
           <div class="col-xs-2">
             <button type="button"
                     class="btn btn-danger m-b"
                     data-ng-click="justus.taiteenala.splice($index, 1)"
                     data-ng-if="justus.taiteenala.length >= 2 && (justus.taiteenala.length - 1) !== $index"
                     title="{{i18n.content.form.taiteenala.poista.tooltip[lang]}}"
                     data-ng-bind="i18n.content.form.taiteenala.poista.tooltip[lang]">
             </button>
           </div>
         </div>
         <div class="row">
           <div class="col-xs-10 form-group">
             <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
             <ui-select
                     role="listbox"
                     aria-label="taiteenalaselect"
                     data-ng-model="taiteenala.selected"
                     on-select="useTaiteenala($select.selected.arvo)"
                     theme="bootstrap">
               <ui-select-match class="ui-select-match"
                                data-ng-value="justus.taiteenala"
                                placeholder="{{i18n.content.form.taiteenala.picktip[lang]}}">
                 {{ $select.selected.arvo }} {{ $select.selected.selite }}
               </ui-select-match>
               <ui-select-choices role="option"
                                  repeat="code in codes.taiteenalat | orderBy: 'arvo' | filter: $select.search">
                 {{code.arvo}} {{code.selite}}
               </ui-select-choices>
             </ui-select>
           </div>
         </div>
       </div>
     </div>

     <!-- Taiteenalan tyyppikategoria-->
     <div class="row form-group"
          id="taidealaTyyppiGroup"
          data-ng-if="isFieldVisible('taidealantyyppikategoria')">
       <div class="col-sm-4 col-xs-12">
         <label for="taidealantyyppikategoria"
                class="control-label"
                data-ng-bind="i18n.content.form.taidealantyyppikategoria[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.taidealantyyppikategoria.tooltip[lang]}}"
            data-ng-show="i18n.content.form.taidealantyyppikategoria.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('taidealantyyppikategoria')" class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-xs-10 col-sm-8 justus-data">
         <div data-ng-repeat="i in justus.taidealantyyppikategoria" class="row">
           <div class="col-xs-10">
             <div class="form-group">
               <input id="taidealantyyppikategoria"
                      name="taidealantyyppikategoria"
                      type="text" data-ng-disabled="true"
                      class="form-control"
                      data-ng-model="lab_taidealantyyppikategoria$index"
                      data-ng-value="i +' '+getSelite(codes.taidealantyypit ,i)">
               <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
             </div>
           </div>
           <div class="col-xs-2">
             <button
                     type="button"
                     class="btn btn-danger m-b"
                     data-ng-click="justus.taidealantyyppikategoria.splice($index, 1)"
                     title="{{i18n.content.form.taidealantyyppikategoria.poista.tooltip[lang]}}"
                     data-ng-bind="i18n.content.form.taidealantyyppikategoria.poista.tooltip[lang]">
             </button>
           </div>
         </div>
         <div class="row">
           <div class="col-xs-10 form-group">
             <span class="fa fa-times form-control-feedback" aria-hidden="true"></span>
             <ui-select role="listbox"
                        aria-label="tyyppikategoriaselect"
                        data-ng-model="taidealantyyppikategoria.selected"
                        on-select="useTaidelanTyyppi($select.selected.arvo)"
                        theme="bootstrap">
               <ui-select-match class="ui-select-match"
                                data-ng-value="justus.taidealantyyppikategoria"
                                placeholder="{{i18n.content.form.taidealantyyppikategoria.picktip[lang]}}">
                 {{ $select.selected.arvo }} {{ $select.selected.selite }}
               </ui-select-match>
               <ui-select-choices role="option"
                                  repeat="code in codes.taidealantyypit | orderBy: 'arvo' | filter: $select.search">
                 {{code.arvo}} {{code.selite}}
               </ui-select-choices>
             </ui-select>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Kansainvälinen yhteisjulkaisu -->
     <div class="row form-group"
          id="kansainvalinenyhteisjulkaisuGroup"
          data-ng-if="isFieldVisible('kansainvalinenyhteisjulkaisu')">
       <div class="col-sm-4 col-xs-12">
         <label class="control-label"
                data-ng-bind="i18n.content.form.kansainvalinenyhteisjulkaisu[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{julkaisutyyppi_paa == 'F' ? i18n.content.form.kansainvalinenyhteisjulkaisu.tooltipF[lang] : i18n.content.form.kansainvalinenyhteisjulkaisu.tooltip[lang]}}"
            data-ng-show="i18n.content.form.kansainvalinenyhteisjulkaisu.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('kansainvalinenyhteisjulkaisu')" class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_kansainvalinenyhteisjulkaisu"
            data-ng-required="requiredHighlight && !isValid('kansainvalinenyhteisjulkaisu')">
         <div class="row">
           <div class="col-xs-10">
             <input id="kansainvalinenyhteisjulkaisu"
                    name="kansainvalinenyhteisjulkaisu"
                    type="radio"
                    data-ng-model="justus.julkaisu.kansainvalinenyhteisjulkaisu"
                    value="1">
             <label for="kansainvalinenyhteisjulkaisu" data-ng-model="lab1_kansainvalinenyhteisjulkaisu"
                    class="control-label">
               {{i18n.content.form.kansainvalinenyhteisjulkaisu['1'][lang]}}
             </label>
             <input type="radio"
                    id="eikansainvalinenyhteisjulkaisu"
                    name="eikansainvalinenyhteisjulkaisu"
                    data-ng-model="justus.julkaisu.kansainvalinenyhteisjulkaisu"
                    value="0">
             <label for="eikansainvalinenyhteisjulkaisu"
                    data-ng-model="lab2_kansainvalinenyhteisjulkaisu"
                    class="control-label">
               {{i18n.content.form.kansainvalinenyhteisjulkaisu['0'][lang]}}
             </label>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Yhteisjulkaisu yrityksen kanssa -->
     <div class="row form-group"
          id="yhteisjulkaisuyrityksenkanssaGroup"
          data-ng-if="isFieldVisible('yhteisjulkaisuyrityksenkanssa')">
       <div class="col-sm-4 col-xs-12">
         <label class="control-label"
                data-ng-bind="i18n.content.form.yhteisjulkaisuyrityksenkanssa[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.yhteisjulkaisuyrityksenkanssa.tooltip[lang]}}"
            data-ng-show="i18n.content.form.yhteisjulkaisuyrityksenkanssa.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('yhteisjulkaisuyrityksenkanssa')" class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_yhteisjulkaisuyrityksenkanssa"
            data-ng-required="requiredHighlight && !isValid('yhteisjulkaisuyrityksenkanssa')">
         <div class="row">
           <div class="col-xs-10">
             <input id="yhteisjulkaisuyrityksenkanssa"
                    name="yhteisjulkaisuyrityksenkanssa"
                    type="radio"
                    data-ng-model="justus.julkaisu.yhteisjulkaisuyrityksenkanssa"
                    value="1">
             <label for="yhteisjulkaisuyrityksenkanssa"
                    data-ng-model="lab1_yhteisjulkaisuyrityksenkanssa"
                    class="control-label">
               {{i18n.content.form.yhteisjulkaisuyrityksenkanssa['1'][lang]}}
             </label>
             <input id="eiyhteisjulkaisuyrityksenkanssa"
                    name="eiyhteisjulkaisuyrityksenkanssa"
                    type="radio"
                    data-ng-model="justus.julkaisu.yhteisjulkaisuyrityksenkanssa"
                    value="0">
             <label for="eiyhteisjulkaisuyrityksenkanssa"
                    data-ng-model="lab2_yhteisjulkaisuyrityksenkanssa"
                    class="control-label">
               {{i18n.content.form.yhteisjulkaisuyrityksenkanssa['0'][lang]}}
             </label>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: DOI-tunniste -->
     <div class="row form-group"
          id="doitunnisteGroup"
          data-ng-if="isFieldVisible('doitunniste')">
       <div class="col-sm-4 col-xs-12">
         <label for="doitunniste"
                class="control-label"
                data-ng-bind="i18n.content.form.doitunniste[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.doitunniste.tooltip[lang]}}"
            data-ng-show="i18n.content.form.doitunniste.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('doitunniste')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <div class="row">
           <div class="col-xs-12">
             <input id="doitunniste"
                    name="doitunniste"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.doitunniste"
                    placeholder="{{ i18n.content.form.doitunniste.picktip[lang] }}">
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Muu tunniste lisätieto -->
     <div class="row form-group" data-ng-if="isFieldVisible('muutunniste')" id="muutunnisteGroup">
       <div class="col-sm-4 col-xs-12">
         <label for="muutunniste" class="control-label" data-ng-bind="i18n.content.form.muutunniste[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.muutunniste.tooltip[lang]}}"
            data-ng-show="i18n.content.form.muutunniste.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('muutunniste')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_muutunniste" data-ng-required="requiredHighlight && !isValid('muutunniste')">
         <div class="row">
           <div class="col-xs-12">
          <textarea id="muutunniste"
                    name="muutunniste"
                    class="form-control vertical-resize"
                    rows="1"
                    maxlength="1000"
                    placeholder="{{i18n.content.form.muutunniste.picktip[lang]}}"
                    data-ng-model="justus.lisatieto.muutunniste">
          </textarea>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Pysyvä verkko-osoite -->
     <div class="row form-group"
          id="pysyvaverkkoosoiteGroup"
          data-ng-if="isFieldVisible('pysyvaverkkoosoite')">
       <div class="col-sm-4 col-xs-12">
         <label for="pysyvaverkkoosoite" class="control-label"
                data-ng-bind="i18n.content.form.pysyvaverkkoosoite[lang]"></label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.pysyvaverkkoosoite.tooltip[lang]}}"
            data-ng-show="i18n.content.form.pysyvaverkkoosoite.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('pysyvaverkkoosoite')" class="fa fa-asterisk required-star"
            aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data">
         <div class="row">
           <div class="col-xs-12">
             <input id="pysyvaverkkoosoite"
                    name="pysyvaverkkoosoite"
                    type="text"
                    class="form-control"
                    data-ng-model="justus.julkaisu.pysyvaverkkoosoite"
                    placeholder="{{ i18n.content.form.pysyvaverkkoosoite.picktip[lang] }}">
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Avoin saatavuus -->
     <div class="row form-group"
          id="avoinsaatavuusGroup"
          data-ng-if="isFieldVisible('avoinsaatavuus')">
       <div class="col-sm-4 col-xs-12">
         <label class="control-label"
                data-ng-bind="i18n.content.form.avoinsaatavuus[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.avoinsaatavuus.tooltip[lang]}}"
            data-ng-show="i18n.content.form.avoinsaatavuus.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('avoinsaatavuus')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_avoinsaatavuus"
            data-ng-required="requiredHighlight && !isValid('avoinsaatavuus')">
         <div class="row">
           <div class="col-xs-10">
             <input id="eiavoinsaatavuutta"
                    name="eiavoinsaatavuutta"
                    type="radio"
                    data-ng-model="justus.julkaisu.avoinsaatavuus"
                    value="0">
             <label for="eiavoinsaatavuutta"
                    data-ng-model="lab1_avoinsaatavuus"
                    class="control-label">
               {{i18n.content.form.avoinsaatavuus['0'][lang]}}
             </label>
             <br>
             <input id="openaccess"
                    name="openaccess"
                    type="radio"
                    data-ng-model="justus.julkaisu.avoinsaatavuus"
                    value="1">
             <label for="openaccess" data-ng-model="lab2_avoinsaatavuus" class="control-label">
               {{i18n.content.form.avoinsaatavuus['1'][lang]}}
               <i class="fa fa-info-circle justus-info"
                  data-popover-trigger="'outsideClick'"
                  data-popover-is-open="popoverIsOpen2"
                  data-ng-mouseenter="popoverIsOpen2 = true"
                  data-popover-placement="right"
                  data-uib-popover="{{i18n.content.form.avoinsaatavuus['1'].tooltip[lang]}}"
                  data-ng-show="i18n.content.form.avoinsaatavuus['1'].tooltip[lang]">
               </i>
             </label>
             <br>
             <input id="hybridijulkaisu"
                    name="hybridijulkaisu"
                    type="radio"
                    data-ng-model="justus.julkaisu.avoinsaatavuus"
                    value="2">
             <label for="hybridijulkaisu" data-ng-model="lab3_avoinsaatavuus" class="control-label">
               {{i18n.content.form.avoinsaatavuus['2'][lang]}}
               <i class="fa fa-info-circle justus-info"
                  data-popover-trigger="'outsideClick'"
                  data-popover-is-open="popoverIsOpen"
                  data-ng-mouseenter="popoverIsOpen = true"
                  data-popover-placement="right"
                  data-uib-popover="{{i18n.content.form.avoinsaatavuus['2'].tooltip[lang]}}"
                  data-ng-show="i18n.content.form.avoinsaatavuus['2'].tooltip[lang]">
               </i>
             </label>
           </div>
         </div>
       </div>
     </div>

     <!-- Kenttä: Lisätieto -->
     <div class="row form-group" data-ng-if="isFieldVisible('lisatieto')" id="lisatietoGroup">
       <div class="col-sm-4 col-xs-12">
         <label for="lisatieto"
                class="control-label"
                data-ng-bind="i18n.content.form.lisatieto[lang]">
         </label>
         <i class="fa fa-info-circle justus-info"
            data-popover-trigger="'outsideClick'"
            data-popover-is-open="popoverIsOpen"
            data-ng-mouseenter="popoverIsOpen = true"
            data-popover-placement="right"
            data-uib-popover="{{i18n.content.form.lisatieto.tooltip[lang]}}"
            data-ng-show="i18n.content.form.lisatieto.tooltip[lang]">
         </i>
         <i data-ng-if="isFieldRequired('lisatieto')" class="fa fa-asterisk required-star" aria-hidden="true"></i>
       </div>
       <div class="col-sm-8 col-xs-12 justus-data"
            data-ng-model="req_lisatieto" data-ng-required="requiredHighlight && !isValid('lisatieto')">
         <div class="row">
           <div class="col-xs-12">
          <textarea id="lisatieto"
                    name="lisatieto"
                    class="form-control vertical-resize"
                    maxlength="1000"
                    data-ng-model="justus.julkaisu.lisatieto"
                    placeholder="{{i18n.content.form.lisatieto.picktip[lang]}}">
          </textarea>
           </div>
         </div>
       </div>
     </div>
   </div>

  <div class="row" data-ng-if="invalidFields.length > 0">
    <div class="col-xs-12">
      <div role="alert" class="alert alert-danger">
        <h3 class="text-secondary mt-0">
        {{i18n.content.tietojensyotto.taytaviela[lang]}}:
        </h3>
        <div>
          <span class="pxs" data-ng-repeat="o in invalidFields">
            <i class="text-xl" data-ng-bind="i18n.content.form[o][lang]?i18n.content.form[o][lang]:o"></i>
            <br>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JATKA -->
<div class="row form-group px m-t">
  <div class="col-md-4 margin-bottom-md">
    <button class="btn btn-danger btn-lg btn-block"
            type="reset"
            data-ng-click="cancelAndGoToPublicationListing()">
      {{i18n.content.tietojensyotto.keskeyta[lang]}}
    </button>
  </div>
  <div class="col-md-8">
    <button class="btn btn-lg btn-block btn-primary"
            type="button"
            data-ng-click="useVaihe(4)">
      {{i18n.content.tietojensyotto.rinnakkaistallennusvalinta[lang]}}
    </button>
  </div>

</div>
